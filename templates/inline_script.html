<script>
  document.addEventListener("DOMContentLoaded", function () {
    Lightense("img.lightense");
  });

  function enableKeyBinds() {
    document.addEventListener("keydown", (event) => {
      switch (event.key) {
        case "j":
          window.scrollBy(0, 100); // scroll down by 100px
          break;
        case "k":
          window.scrollBy(0, -100); // scroll up by 100px
          break;
        case "p":
          window.scrollTo(0, 0); // scroll to top
          break;
        case "n":
          window.scrollTo(0, document.body.scrollHeight); // scroll to bottom
          break;
        case "g":
          window.location.href = "/"; // go to root
          break;
        case "b":
          window.location.href = "/blog"; // go to blog
          break;
        case "c":
          window.location.href = "/contact"; // go to contact
          break;
        case "r":
          window.location.reload(); // refresh the page
          break;
      }
    });

    function navigateToPost(selector) {
      const linkElement = document.querySelector(selector);
      if (linkElement) {
        window.location.href = linkElement.href;
      }
    }
  }

  function enablePermalinks() {
    document.addEventListener("DOMContentLoaded", function () {
      const headers = document.querySelectorAll("h1, h2, h3, h4");

      headers.forEach((header) => {
        const id = header.id;
        if (id) {
          // Create a new anchor element
          const link = document.createElement("a");
          link.href = `#${id}`;
          link.className = "header-permalink";
          link.setAttribute("title", "Permalink");

          // Move the header's content inside the anchor element
          while (header.firstChild) {
            link.appendChild(header.firstChild);
          }

          // Replace the header's content with the anchor element
          header.appendChild(link);
          header.classList.add("header-with-permalink");
        }
      });
    });
  }

  function enableBackToTop() {
    document.addEventListener("DOMContentLoaded", function () {
      const backToTopButton = document.getElementById("backToTop");

      window.onscroll = function () {
        if (window.scrollY > 1200) {
          backToTopButton.style.display = "block";
        } else {
          backToTopButton.style.display = "none";
        }
      };

      backToTopButton.addEventListener("click", function () {
        window.scrollTo({
          top: 0,
          behavior: "smooth",
        });
      });
    });
  }

  enableKeyBinds();
  enablePermalinks();
  // enableBackToTop();
</script>
